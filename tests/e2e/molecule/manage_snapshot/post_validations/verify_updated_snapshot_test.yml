---
- name: Get info about the snapshot
  ansible.builtin.include_tasks:
    file: ../tasks/get_snapshot_info.yml

- name: "Validate the properties of the snapshots"
  loop: "{{ vm_snapshots_updated }}"
  loop_control:
    loop_var: snapshot
    index_var: index
  ansible.builtin.assert:
    that:
      - snapshot_info.guest_snapshots.snapshots[index].name == snapshot.snapshot_management_new_snapshot_name
      - snapshot_info.guest_snapshots.snapshots[index].description == snapshot.snapshot_management_new_description
